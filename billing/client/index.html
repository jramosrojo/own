<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Stripe Payment Page Recipe</title>
    <meta name="description" content="A demo of Stripe Checkout" />
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/global.css" />
    <!-- Load Stripe.js on your website. -->
    <script src="https://js.stripe.com/v3"></script>
  </head>

  <body>
    <div class="sr-root">
      <div class="sr-main">
        <header class="sr-header">
          <div class="sr-header__logo"></div>
        </header>
        <div class="sr-payment-summary payment-view">
          <h1 class="order-amount">$14.00</h1>
          <h4>per month subscription</h4>
        </div>        
        <div class="sr-payment-form payment-view">
          <!-- Create a button that your customers click to complete their purchase. Customize the styling to suit your branding. -->
          <button>Checkout</button>

          <div id="error-message"></div>

          <script>
          (function() {
            var stripe = Stripe('pk_live_i3IQgMSidjHBCkYGqlwr4f6b00ri3U95Lh');

            var checkoutButton = document.getElementById('checkout-button-plan_H15ziDpGwUhnlK');
            checkoutButton.addEventListener('click', function () {
              // When the customer clicks on the button, redirect
              // them to Checkout.
              stripe.redirectToCheckout({
                items: [{plan: 'plan_H15ziDpGwUhnlK', quantity: 1}],

                // Do not rely on the redirect to the successUrl for fulfilling
                // purchases, customers may not always reach the success_url after
                // a successful payment.
                // Instead use one of the strategies described in
                // https://stripe.com/docs/payments/checkout/fulfillment
                successUrl: 'https://billing.jramosrojo.com/success',
                cancelUrl: 'https://billing.jramosrojo.com/canceled',
              })
              .then(function (result) {
                if (result.error) {
                  // If `redirectToCheckout` fails due to a browser or network
                  // error, display the localized error message to your customer.
                  var displayError = document.getElementById('error-message');
                  displayError.textContent = result.error.message;
                }
              });
            });
          })();
          </script>
          <div class="sr-legal-text">
            Your card will be immediately charged <span class="order-total">$14.00</span> and then billed $14.00 each month.
          </div>
        </div>
    </div>
    <div class="sr-content">
      <div class="pasha-image-stack">
        <img
          src="https://picsum.photos/280/320?random=1"
          width="140"
          height="160"
        />
        <img
          src="https://picsum.photos/280/320?random=2"
          width="140"
          height="160"
        />
        <img
          src="https://picsum.photos/280/320?random=3"
          width="140"
          height="160"
        />
        <img
          src="https://picsum.photos/280/320?random=4"
          width="140"
          height="160"
        />
      </div>
    </div>

  </body>
</html>
